{% extends "base.html" %}
{% block content %}
<main class="max-w-7xl mx-auto p-6 sm:p-10">
  <h1 class= "font-extrabold mb-1">Analytics Dashboard</h1>
  <p class="text-slate-600 mb-6">Overview of your e-commerce performance and profit analysis.</p>

  <!-- Stat Cards -->
<!-- First row: 3 wider cards -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
  <div class="p-4 bg-white border-l-4 border-green-300 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Total Revenue</p>
        <h2 class="text-xl font-bold">RS {{ totals.revenue | default(0) | round(1) }}</h2>
      </div>
      <div class="text-green-500"><i class="fas fa-dollar-sign text-xl"></i></div>
    </div>
  </div>
  <div class="p-4 bg-white border-l-4 border-blue-300 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Gross Profit</p>
        <h2 class="text-xl font-bold">RS {{ totals.gross_profit | default(0) | round(1) }}</h2>
      </div>
        <div class="text-blue-500"><i class="fas fa-chart-line text-xl"></i></div>
    </div>
  </div>
  <div class="p-4 bg-white border-l-4 border-blue-500 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Final Profit</p>
        <h2 class="text-xl font-bold">RS {{ totals.final_profit | default(0) | round(1) }}</h2>
      </div>
        <div class="text-green-500"><i class="fas fa-coins text-xl"></i></div>
    </div>
  </div>
</div>

<!-- Second row: 4 equal cards -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
  <div class="p-4 bg-white border-l-4 border-red-300 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Deductions</p>
        <h2 class="text-xl font-bold">RS {{ totals.deductions | default(0) | round(1) }}</h2>
      </div>
      <div class="text-red-500"><i class="fas fa-arrow-down text-xl"></i></div>
    </div>
  </div>
  <div class="p-4 bg-white border-l-4 border-orange-300 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Handling Fees</p>
        <h2 class="text-xl font-bold">RS {{ totals.handling_fee | default(0) | round(1) }}</h2>
      </div>
      <div class="text-orange-500"><i class="fas fa-minus-circle text-xl"></i></div>
    </div>
  </div>
  <div class="p-4 bg-white border-l-4 border-yellow-400 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Packing Fees</p>
        <h2 class="text-xl font-bold">RS {{ totals.packing_fee | default(0) | round(1) }}</h2>
      </div>
      <div class="text-yellow-500"><i class="fas fa-box text-xl"></i></div>
    </div>
  </div>
  <div class="p-4 bg-white border-l-4 border-teal-400 shadow-sm rounded-md">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-sm text-slate-500 mb-1">Logistics Fees</p>
        <h2 class="text-xl font-bold">RS {{ totals.logistics_fee | default(0) | round(1) }}</h2>
      </div>
      <div class="text-teal-500"><i class="fas fa-truck text-xl"></i></div>
    </div>
  </div>
</div>


<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
  <!-- Revenue vs Deductions -->
  <div class="bg-white border border-slate-200 rounded-xl shadow-sm p-2">
    <h3 class="text-sm font-semibold text-slate-700 mb-3">Revenue vs Deductions</h3>
    <canvas id="revenuePie" class="h-48"></canvas>
  </div>

  <!-- Fee Breakdown -->
  <div class="bg-white border border-slate-200 rounded-xl shadow-sm p-2">
    <h3 class="text-sm font-semibold text-slate-700 mb-3">Fee Breakdown</h3>
    <canvas id="feeBar" class="h-48"></canvas>
  </div>

  <!-- Profit vs Costs -->
  <div class=" h-[300px] flex items-center justify-center bg-white border border-slate-200 rounded-xl shadow-sm p-2">
    <h3 class="text-sm font-semibold text-slate-700 mb-3">Profit vs Total Cost</h3>
    <canvas id="profitPie"></canvas>
  </div>



  <!-- Revenue Split -->
  <div class="h-[300px] bg-white border border-slate-200 rounded-xl shadow-sm p-2">
    <h3 class="text-sm font-semibold text-slate-700 mb-3">Revenue Breakdown</h3>
    <canvas id="revenueBar" class=" flex items-center justify-center"></canvas>
  </div>
</div>
</main>

<script>
  window.dashboardData = {{ totals | tojson }};
</script>

{% endblock %}